version: "2"
services:
  haproxy:
    image: haproxy 
    depends_on:
    - webapp
    ports:
    - "80:8080"
    - "1936:1936"
    environment:
      FRONTEND_PORT: "8080"
      BACKENDS: "webapp"
      BACKENDS_PORT: "8080"
      DNS_ENABLED: "True"
      HTTPCHK: "GET /"
      INTER: "5s"
      DNS_TTL: 1
  webapp:
    image: eeacms/hello
    environment:
      PORT: "8080"
